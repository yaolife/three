import{_ as I,a as c,s as V,o as w,c as B,x as $,h as x,w as s,d as p,F as H,l as X,e as q,u as j,z as G,g as u,i as J,q as Q,E as n,b as a,m as M,A as Y,t as N,v as Z,y as D}from"./index-58c7e111.js";import{a as ee}from"./common-9bd3b376.js";import{i as ie,r as le,s as te,t as ae}from"./index-9fc1f318.js";const C={101:[{prop:"deviceModel",label:"产品型号",minWidth:120},{prop:"pq",label:"额定载荷(kg)",minWidth:120},{prop:"approximateWidth",label:"近似宽度(4、5、6:1)",minWidth:150},{prop:"approximateWidthTwo",label:"近似宽度(7:1)",minWidth:120},{prop:"miniLength",label:"最小长度",minWidth:120},{prop:"eyeLength",label:"环眼长度",minWidth:120}],102:[{prop:"deviceModel",label:"产品型号",minWidth:120},{prop:"pq",label:"额定载荷(kg)",minWidth:120},{prop:"approximateThickness",label:"近似厚度(mm)",minWidth:120},{prop:"approximateWidth",label:"近似宽度(mm)",minWidth:120},{prop:"miniLength",label:"最小长度L(m)",minWidth:120}],103:[{prop:"deviceModel",label:"产品型号",minWidth:120},{prop:"pq",label:"额定载荷(kg)",minWidth:120},{prop:"approximateWidth",label:"近似宽度(mm)",minWidth:120},{prop:"miniLength",label:"最小长度L(m)",minWidth:120},{prop:"eyeLength",label:"环眼长度(mm)",minWidth:120},{prop:"weight",label:"环重(kg)",minWidth:120}]},F={108:[{prop:"deviceModel",label:"产品型号",minWidth:120},{prop:"diameter",label:"直径(mm)",minWidth:100},{prop:"smalPull",label:"最小破断力(KN)",minWidth:130},{prop:"pq",label:"单只额定载荷(KN)",minWidth:150},{prop:"pqTwo",label:"双只额定载荷(KN,a=45°)",minWidth:180},{prop:"pqThre",label:"双只额定载荷(KN,a=90°)",minWidth:180},{prop:"weight",label:"近似重量(kg/m)",minWidth:130}],109:[{prop:"deviceModel",label:"产品型号(麻芯)",minWidth:140},{prop:"deviceModelTwo",label:"产品型号(钢芯)",minWidth:140},{prop:"diameter",label:"钢丝绳直径(mm)",minWidth:140},{prop:"pq",label:"额定载荷(麻芯)(kn)",minWidth:150},{prop:"pqTwo",label:"额定载荷(钢芯)(kn)",minWidth:150},{prop:"setLength",label:"近似套长(A)(mm)",minWidth:140}],110:[{prop:"deviceModel",label:"产品型号(麻芯)",minWidth:140},{prop:"deviceModelTwo",label:"产品型号(钢芯)",minWidth:140},{prop:"diameter",label:"钢丝绳直径(mm)",minWidth:140},{prop:"pq",label:"额定载荷(麻芯)(kn)",minWidth:150},{prop:"pqTwo",label:"额定载荷(钢芯)(kn)",minWidth:150},{prop:"setLength",label:"近似套长(A)(mm)",minWidth:140},{prop:"axBxd",label:"吊环参数AxBxd(mm)",minWidth:160},{prop:"hookType",label:"吊钩型号(t)",minWidth:120},{prop:"hookLoad",label:"吊钩载荷(t)",minWidth:120}],112:[{prop:"deviceModel",label:"产品型号",minWidth:120},{prop:"diameter",label:"钢丝绳直径(mm)",minWidth:140},{prop:"a",label:"A(mm)",minWidth:100},{prop:"b",label:"B(mm)",minWidth:100},{prop:"c",label:"C(mm)",minWidth:100},{prop:"e",label:"E(mm)",minWidth:100},{prop:"m",label:"M(mm)",minWidth:100},{prop:"l1",label:"L1(mm)",minWidth:100},{prop:"f",label:"轴F(mm)",minWidth:100}],113:[{prop:"deviceModel",label:"产品型号",minWidth:120},{prop:"diameter",label:"钢丝绳直径d(mm)",minWidth:140},{prop:"a",label:"A(mm)",minWidth:100},{prop:"b",label:"B(mm)",minWidth:100},{prop:"c",label:"C(mm)",minWidth:100},{prop:"d",label:"D(mm)",minWidth:100},{prop:"e",label:"E(mm)",minWidth:100},{prop:"m",label:"M(mm)",minWidth:100},{prop:"l1",label:"L1(mm)",minWidth:100},{prop:"f",label:"轴F(mm)",minWidth:100},{prop:"aperture",label:"孔径(mm)",minWidth:100}],114:[{prop:"deviceModel",label:"产品型号",minWidth:120},{prop:"deviceModelTwo",label:"接头型号",minWidth:120},{prop:"diameter",label:"钢丝绳直径d(mm)",minWidth:140},{prop:"a",label:"A(mm)",minWidth:100},{prop:"b",label:"B(mm)",minWidth:100},{prop:"c",label:"C(mm)",minWidth:100},{prop:"m",label:"M(mm)",minWidth:100},{prop:"n",label:"N(mm)",minWidth:100},{prop:"f",label:"轴F(mm)",minWidth:100},{prop:"aperture",label:"孔径C(mm)",minWidth:100},{prop:"a1",label:"A1(mm)",minWidth:100},{prop:"b1",label:"B1(mm)",minWidth:100},{prop:"n1",label:"N1(mm)",minWidth:100}]},E={115:[{prop:"deviceModel",label:"产品型号",minWidth:120},{prop:"pq",label:"额定载荷(t)",minWidth:120},{prop:"w",label:"W(mm)",minWidth:100},{prop:"d",label:"D(mm)",minWidth:100},{prop:"p",label:"P(mm)",minWidth:100},{prop:"a",label:"A(mm)",minWidth:100},{prop:"o",label:"O(mm)",minWidth:100},{prop:"s",label:"S(mm)",minWidth:100},{prop:"d",label:"d(mm)",minWidth:100},{prop:"e",label:"E(mm)",minWidth:100},{prop:"weight",label:"自重(kg)",minWidth:100}],116:[{prop:"deviceModel",label:"产品型号",minWidth:120},{prop:"pq",label:"额定载荷(t)",minWidth:120},{prop:"w",label:"W(mm)",minWidth:100},{prop:"d",label:"D(mm)",minWidth:100},{prop:"p",label:"P(mm)",minWidth:100},{prop:"o",label:"O(mm)",minWidth:100},{prop:"s",label:"S(mm)",minWidth:100},{prop:"d",label:"d(mm)",minWidth:100},{prop:"e",label:"E(mm)",minWidth:100},{prop:"weight",label:"自重(kg)",minWidth:100},{prop:"l",label:"L(BW型)(kg)",minWidth:120}],117:[{prop:"deviceModel",label:"产品型号",minWidth:120},{prop:"pq",label:"额定载荷(t)",minWidth:120},{prop:"w",label:"W(mm)",minWidth:100},{prop:"d",label:"D(mm)",minWidth:100},{prop:"p",label:"P(mm)",minWidth:100},{prop:"o",label:"O(mm)",minWidth:100},{prop:"s",label:"S(mm)",minWidth:100},{prop:"d",label:"d(mm)",minWidth:100},{prop:"e",label:"E(mm)",minWidth:100},{prop:"weight",label:"自重(BW型)(kg)",minWidth:130},{prop:"weightTwo",label:"自重(BX型)(kg)",minWidth:130},{prop:"weightThree",label:"自重(DW型)(kg)",minWidth:130},{prop:"weightFour",label:"自重(DX型)(kg)",minWidth:130},{prop:"l",label:"L(BW型)(kg)",minWidth:120},{prop:"l1",label:"L(BX型)(kg)",minWidth:120},{prop:"l2",label:"L(DW型)(kg)",minWidth:120},{prop:"l3",label:"L(BX型)(kg)",minWidth:120}]},S={104:[{prop:"deviceModel",label:"产品型号(L+直径)",minWidth:100},{prop:"diameter",label:"直径(mm)",minWidth:100},{prop:"gardenWeek",label:"圆周(INCH)",minWidth:120},{prop:"kTex",label:"线密度(Ktex)",minWidth:130},{prop:"deviation",label:"偏差(%)",minWidth:100},{prop:"weight",label:"理论重量(kg/200M)",minWidth:150},{prop:"fractureForce",label:"最低断裂强力(KN)",minWidth:150},{prop:"fractureForceTwo",label:"最低断裂强力(Ton)",minWidth:160},{prop:"fractureForceThree",label:"最低断裂强力(未插编)(KN)",minWidth:200},{prop:"fractureForceFour",label:"最低断裂强力(带环眼绳索)(KN)",minWidth:220}],105:[{prop:"deviceModel",label:"产品型号(L+直径)",minWidth:100},{prop:"diameter",label:"直径(mm)",minWidth:100},{prop:"gardenWeek",label:"圆周(INCH)",minWidth:120},{prop:"kTex",label:"线密度(Ktex)",minWidth:130},{prop:"deviation",label:"偏差(%)",minWidth:100},{prop:"weight",label:"理论重量(kg/200M)",minWidth:150},{prop:"fractureForce",label:"最低断裂强力(KN)",minWidth:150},{prop:"fractureForceTwo",label:"最低断裂强力(Ton)",minWidth:160},{prop:"fractureForceThree",label:"最低断裂强力(未插编)(KN)",minWidth:200},{prop:"fractureForceFour",label:"最低断裂强力(带环眼绳索)(KN)",minWidth:220}],106:[{prop:"deviceModel",label:"产品型号(L+直径)",minWidth:100},{prop:"diameter",label:"直径(mm)",minWidth:100},{prop:"gardenWeek",label:"圆周(INCH)",minWidth:120},{prop:"kTex",label:"线密度(Ktex)",minWidth:130},{prop:"deviation",label:"偏差(%)",minWidth:100},{prop:"weight",label:"理论重量(kg/200M)",minWidth:150},{prop:"fractureForce",label:"最低断裂强力(KN)",minWidth:150},{prop:"fractureForceTwo",label:"最低断裂强力(Ton)",minWidth:160}],107:[{prop:"deviceModel",label:"产品型号(L+直径)",minWidth:100},{prop:"pq",label:"破断载荷(kg)",minWidth:130},{prop:"diameter",label:"近似直径(mm)",minWidth:130},{prop:"miniLength",label:"最小长度(m)",minWidth:120},{prop:"maxLength",label:"最大长度(m)",minWidth:120},{prop:"setLength",label:"套长(mm)",minWidth:100},{prop:"weight",label:"每米重量(kg/m)",minWidth:130}]};function oe(W){const r=String(W);return C[r]?C[r]:F[r]?F[r]:E[r]?E[r]:S[r]?S[r]:[{prop:"deviceModel",label:"产品型号",minWidth:120},{prop:"ratedLoad",label:"额定载荷",minWidth:120}]}const ne={class:"dynamic-table-wrapper"},pe={__name:"DynamicRiggingTable",props:{tableData:{type:Array,required:!0},columns:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["delete"],setup(W,{emit:r}){const l=r,t=d=>{l("delete",d)};return(d,g)=>{const b=c("el-table-column"),f=c("el-input"),L=c("el-button"),k=c("el-table"),v=V("loading");return w(),B("div",ne,[$((w(),x(k,{data:W.tableData,border:"",style:{width:"100%"},"header-cell-style":{background:"#f5f7fa"}},{default:s(()=>[p(b,{type:"index",label:"序号",width:"60"}),(w(!0),B(H,null,X(W.columns,m=>(w(),x(b,{key:m.prop,prop:m.prop,label:m.label,"min-width":m.minWidth},{default:s(y=>[p(f,{modelValue:y.row[m.prop],"onUpdate:modelValue":_=>y.row[m.prop]=_,placeholder:`请输入${m.label}`,size:"small"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","label","min-width"]))),128)),p(b,{label:"操作",width:"80",fixed:"right"},{default:s(m=>[p(L,{link:"",type:"danger",size:"small",onClick:y=>t(m.$index)},{default:s(()=>[...g[0]||(g[0]=[q(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[v,W.loading]])])}}},re=I(pe,[["__scopeId","data-v-e08891dd"]]);const de={class:"rigging-detail-container"},me={class:"card-header"},se={class:"header-left"},he={class:"header-right"},ce={class:"page-content"},be={class:"info-section"},ue={class:"info-item"},We={class:"value"},ge={class:"info-item"},fe={class:"value"},ve={class:"info-item"},ye={class:"value"},_e={class:"info-item"},Te={class:"value"},we={class:"table-section"},Le={class:"table-toolbar"},ke={__name:"RiggingDetail",setup(W){const r=j(),l=G(),t=u({id:"",liftingType:"",liftingName:"",prodBusiness:"",subType:"",subTypeName:""}),d=u([]),g=u(!1),b=u(!1),f=u(1),L=u(10),k=u(0),v=J(()=>t.value.subType?oe(t.value.subType):[{prop:"deviceModel",label:"产品型号",minWidth:120},{prop:"ratedLoad",label:"额定载荷",minWidth:120}]),m=()=>{const i={deviceName:"",deviceModel:"",deviceCode:""};return v.value.forEach(e=>{i[e.prop]=""}),i},y=async i=>{try{const e=await ie({pageNum:1,pageSize:10});if(e&&e.code==="0"&&e.data&&e.data.records){const o=e.data.records.find(h=>h.id==i);o?t.value={id:o.id,liftingType:o.liftingType,liftingName:o.liftingName,prodBusiness:o.prodBusiness,subType:o.twoLiftingType||"",subTypeName:o.twoLiftingName||""}:n.error("未找到对应的吊索具信息")}else n.error((e==null?void 0:e.message)||"获取吊索具信息失败")}catch(e){console.error("获取吊索具信息失败:",e),n.error("获取吊索具信息失败，请检查网络连接")}},_=async()=>{if(!t.value.id){d.value=[];return}g.value=!0;try{const i=await le({pageNum:f.value,pageSize:L.value,liftingInfoId:t.value.id});i&&i.code==="0"?(d.value=i.data.records||[],k.value=i.data.total||0):n.error((i==null?void 0:i.message)||"获取详情数据失败")}catch(i){console.error("获取详情数据失败:",i),n.error("获取数据失败，请检查网络连接")}finally{g.value=!1}},K=i=>{f.value=i,_()},A=()=>{r.back()},R=()=>{d.value.push(m())},P=i=>{const e=d.value[i];e&&e.id?D.confirm("确定要删除这行数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const o=await te(e.id);o&&o.code==="0"?(d.value.splice(i,1),n.success("删除成功")):n.error((o==null?void 0:o.message)||"删除失败")}catch(o){console.error("删除失败:",o),n.error("删除失败，请检查网络连接")}}).catch(()=>{n.info("已取消删除")}):D.confirm("确定要删除这行数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{d.value.splice(i,1),n.success("删除成功")}).catch(()=>{n.info("已取消删除")})},z=async()=>{for(let i=0;i<d.value.length;i++){const e=d.value[i],o=[];v.value.forEach(h=>{const T=e[h.prop];(!T||typeof T=="string"&&T.trim()==="")&&o.push(h.label)})}b.value=!0;try{const i=await ae({liftingInfoId:t.value.id,sysProjectTemplateLiftingList:d.value});i&&i.code==="0"?(n.success("保存成功"),setTimeout(()=>{r.push("/data-management")},1e3)):n.error((i==null?void 0:i.message)||"保存失败")}catch(i){console.error("保存失败:",i),n.error("保存失败，请检查网络连接")}finally{b.value=!1}};return Q(async()=>{l.query.id?(t.value.id=l.query.id,t.value.liftingType=l.query.liftingType,t.value.liftingName=l.query.liftingName,t.value.prodBusiness=l.query.prodBusiness,t.value.subType=l.query.twoLiftingType||l.query.subType||"",t.value.subTypeName=l.query.twoLiftingName||l.query.subTypeName||"",await _()):l.params.id&&(t.value.id=l.params.id,l.query.liftingType&&l.query.liftingName&&l.query.prodBusiness?(t.value.liftingType=l.query.liftingType,t.value.liftingName=l.query.liftingName,t.value.prodBusiness=l.query.prodBusiness,t.value.subType=l.query.twoLiftingType||l.query.subType||"",t.value.subTypeName=l.query.twoLiftingName||l.query.subTypeName||""):await y(l.params.id),await _())}),(i,e)=>{const o=c("el-icon"),h=c("el-button"),T=c("el-pagination"),O=c("el-card");return w(),B("div",de,[p(O,{class:"page-card"},{header:s(()=>[a("div",me,[a("div",se,[p(h,{onClick:A,link:""},{default:s(()=>[p(o,null,{default:s(()=>[p(M(Y))]),_:1}),e[1]||(e[1]=q(" 返回 ",-1))]),_:1}),e[2]||(e[2]=a("span",{class:"title"},"吊索具详情",-1))]),a("div",he,[p(h,{type:"primary",onClick:z,loading:b.value},{default:s(()=>[...e[3]||(e[3]=[q(" 确认新增 ",-1)])]),_:1},8,["loading"])])])]),default:s(()=>[a("div",ce,[a("div",be,[a("div",ue,[e[4]||(e[4]=a("span",{class:"label"},"吊索具类型：",-1)),a("span",We,N(M(ee)(t.value.liftingType)),1)]),a("div",ge,[e[5]||(e[5]=a("span",{class:"label"},"吊索具名称：",-1)),a("span",fe,N(t.value.liftingName),1)]),a("div",ve,[e[6]||(e[6]=a("span",{class:"label"},"生产厂家：",-1)),a("span",ye,N(t.value.prodBusiness),1)]),a("div",_e,[e[7]||(e[7]=a("span",{class:"label"},"子类型：",-1)),a("span",Te,N(t.value.subTypeName),1)])]),a("div",we,[a("div",Le,[e[9]||(e[9]=a("span",{class:"table-title"},"吊索具详细信息",-1)),p(h,{type:"primary",size:"small",onClick:R},{default:s(()=>[p(o,null,{default:s(()=>[p(M(Z))]),_:1}),e[8]||(e[8]=q(" 添加行 ",-1))]),_:1})]),p(re,{"table-data":d.value,columns:v.value,loading:g.value,onDelete:P},null,8,["table-data","columns","loading"]),p(T,{"current-page":f.value,"onUpdate:currentPage":e[0]||(e[0]=U=>f.value=U),"page-size":L.value,total:k.value,layout:"total, prev, pager, next",class:"pagination",onCurrentChange:K},null,8,["current-page","page-size","total"])])])]),_:1})])}}},Be=I(ke,[["__scopeId","data-v-3f20e16e"]]);export{Be as default};
