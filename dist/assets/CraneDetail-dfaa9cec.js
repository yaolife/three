import{_ as I,z as O,u as E,g as x,q as S,E as g,a as v,o as R,c as h,d as l,w as a,b as f,F,l as G,m as A,e as r,v as U,h as J}from"./index-defd5518.js";import{u as K,v as Q}from"./index-9fc1f318.js";import{g as X}from"./common-9bd3b376.js";const Y={class:"crane-detail-container"},Z={class:"info-section"},ee={class:"edit-section"},le={class:"grid-form"},ae={class:"edit-section"},ne={class:"section-header"},oe={class:"table-wrapper"},te={class:"edit-section"},ie={class:"section-header"},de={class:"table-wrapper"},ue={class:"edit-section"},re={class:"section-header"},se={class:"table-wrapper"},me={class:"footer-actions"},pe={__name:"CraneDetail",setup(fe){const b=O(),B=E(),m=x({craneName:"",manufacturer:"",model:"",craneType:""}),t=x({maxCraneLength:"",counterweight:"",maxLiftingHeight:"",maxLiftingMoment:"",mainHookWeight:"",mainHookMaxCapacity:"",auxHookWeight:"",auxHookMaxCapacity:"",maxLuffingAngle:"",minLuffingAngle:"",superLiftCounterweightWeight:"",superLiftCounterweightRadius:"",mainBoomMaxLength:"",jibMaxLength:"",totalBoomMaxLength:""}),V=x([]),_=x([]),C=x([]),M=()=>{V.value.push({workingRadius:"",mainBoomLength:"",liftingCapacity:""})},P=s=>{V.value.splice(s,1)},z=()=>{_.value.push({workingRadius:"",boomAngle:"",liftingCapacity:""})},H=s=>{_.value.splice(s,1)},j=()=>{C.value.push({workingRadius:"",boomAngle:"",liftingCapacity:""})},N=s=>{C.value.splice(s,1)},q=X();S(async()=>{const s=b.query.id;if(s)try{const e=await K(s);if(e&&e.code==="0"&&e.data){const i=e.data;if(m.value.craneName=i.machineName||b.query.craneName,m.value.manufacturer=i.prodBusiness||b.query.manufacturer,m.value.model=i.model||b.query.model,m.value.craneType=i.type||b.query.craneType,i.sysProjectTemplateCraneDetail){const d=i.sysProjectTemplateCraneDetail;Object.keys(t.value).forEach(o=>{d[o]!==void 0&&(t.value[o]=d[o])})}i.performanceDataVOS&&Array.isArray(i.performanceDataVOS)&&(V.value=[],_.value=[],i.performanceDataVOS.forEach(d=>{d.sysProjectLiftingPerformanceDataList&&Array.isArray(d.sysProjectLiftingPerformanceDataList)&&(d.armType===0?V.value=d.sysProjectLiftingPerformanceDataList.map(o=>({workingRadius:o.workingRadius!==void 0&&o.workingRadius!==null?o.workingRadius:"",boomAngle:o.boomAngle!==void 0&&o.boomAngle!==null?o.boomAngle:"",liftingCapacity:o.liftingCapacity!==void 0&&o.liftingCapacity!==null?o.liftingCapacity:""})):d.armType===1?_.value=d.sysProjectLiftingPerformanceDataList.map(o=>({workingRadius:o.workingRadius!==void 0&&o.workingRadius!==null?o.workingRadius:"",boomAngle:o.boomAngle!==void 0&&o.boomAngle!==null?o.boomAngle:"",liftingCapacity:o.liftingCapacity!==void 0&&o.liftingCapacity!==null?o.liftingCapacity:""})):d.armType===2&&(C.value=d.sysProjectLiftingPerformanceDataList.map(o=>({workingRadius:o.workingRadius!==void 0&&o.workingRadius!==null?o.workingRadius:"",boomAngle:o.boomAngle!==void 0&&o.boomAngle!==null?o.boomAngle:"",liftingCapacity:o.liftingCapacity!==void 0&&o.liftingCapacity!==null?o.liftingCapacity:""}))))}))}else g.error((e==null?void 0:e.message)||"获取起重机详情失败")}catch(e){console.error("获取起重机详情失败:",e),g.error("获取起重机详情失败，请检查网络连接")}else{const e=b.query.craneName,i=b.query.manufacturer,d=b.query.model,o=b.query.craneType;e&&(m.value.craneName=e),i&&(m.value.manufacturer=i),d&&(m.value.model=d),o&&(m.value.craneType=o)}});const W=async()=>{if(!m.value.craneName){g.warning("请输入起重机名称");return}if(!m.value.manufacturer){g.warning("请输入生产厂家");return}if(!m.value.model){g.warning("请输入型号");return}if(!m.value.craneType){g.warning("请选择类型");return}if(t.value.counterweight===""||t.value.counterweight===void 0){g.warning("请输入车体配重");return}if(t.value.maxLiftingHeight===""||t.value.maxLiftingHeight===void 0){g.warning("请输入最大起升高度");return}if(t.value.maxLiftingMoment===""||t.value.maxLiftingMoment===void 0){g.warning("请输入最大起重力矩");return}if(t.value.maxLuffingAngle===""||t.value.maxLuffingAngle===void 0){g.warning("请输入最大变幅角度");return}for(let s=0;s<V.value.length;s++){const e=V.value[s];if(e.workingRadius===""||e.workingRadius===void 0||e.boomAngle===""||e.boomAngle===void 0||e.liftingCapacity===""||e.liftingCapacity===void 0){g.warning(`主臂长度基础编辑第${s+1}行数据不完整，请填写完整`);return}}for(let s=0;s<_.value.length;s++){const e=_.value[s];if(e.workingRadius===""||e.workingRadius===void 0||e.boomAngle===""||e.boomAngle===void 0||e.liftingCapacity===""||e.liftingCapacity===void 0){g.warning(`主臂+副臂(46+9.2)基础编辑第${s+1}行数据不完整，请填写完整`);return}}for(let s=0;s<C.value.length;s++){const e=C.value[s];if(e.workingRadius===""||e.workingRadius===void 0||e.boomAngle===""||e.boomAngle===void 0||e.liftingCapacity===""||e.liftingCapacity===void 0){g.warning(`主臂+副臂(46+16)基础编辑第${s+1}行数据不完整，请填写完整`);return}}try{const s=b.query.id;if(!s){g.error("缺少起重机ID");return}const e=V.value.map(u=>({workingRadius:u.workingRadius!==void 0&&u.workingRadius!==null?u.workingRadius:"",boomAngle:u.boomAngle!==void 0&&u.boomAngle!==null?u.boomAngle:"",liftingCapacity:u.liftingCapacity!==void 0&&u.liftingCapacity!==null?u.liftingCapacity:""})),i=_.value.map(u=>({workingRadius:u.workingRadius!==void 0&&u.workingRadius!==null?u.workingRadius:"",boomAngle:u.boomAngle!==void 0&&u.boomAngle!==null?u.boomAngle:"",liftingCapacity:u.liftingCapacity!==void 0&&u.liftingCapacity!==null?u.liftingCapacity:""})),d=C.value.map(u=>({workingRadius:u.workingRadius!==void 0&&u.workingRadius!==null?u.workingRadius:"",boomAngle:u.boomAngle!==void 0&&u.boomAngle!==null?u.boomAngle:"",liftingCapacity:u.liftingCapacity!==void 0&&u.liftingCapacity!==null?u.liftingCapacity:""})),o={craneInfoId:s,sysProjectTemplateCraneDetail:t.value,performanceInfoAddUpdateList:[{craneType:0,armType:0,sysProjectLiftingPerformanceDataList:e},{craneType:0,armType:1,sysProjectLiftingPerformanceDataList:i},{craneType:0,armType:2,sysProjectLiftingPerformanceDataList:d}]},w=await Q(o);w&&w.code==="0"?(g.success("保存成功"),B.push("/data-management")):g.error((w==null?void 0:w.message)||"保存失败")}catch(s){console.error("保存起重机详情失败:",s),g.error("保存失败，请检查网络连接")}};return(s,e)=>{const i=v("el-input"),d=v("el-form-item"),o=v("el-col"),w=v("el-row"),u=v("el-option"),$=v("el-select"),T=v("el-form"),c=v("el-icon"),k=v("el-button"),y=v("el-table-column"),L=v("el-table"),D=v("el-card");return R(),h("div",Y,[l(D,{class:"detail-card"},{header:a(()=>[...e[19]||(e[19]=[f("div",{class:"card-header"},[f("span",null,"起重机设置")],-1)])]),default:a(()=>[f("div",Z,[l(T,{model:m.value,"label-width":"120px"},{default:a(()=>[l(w,{gutter:20},{default:a(()=>[l(o,{span:12},{default:a(()=>[l(d,{label:"起重机名称"},{default:a(()=>[l(i,{modelValue:m.value.craneName,"onUpdate:modelValue":e[0]||(e[0]=n=>m.value.craneName=n),placeholder:"请输入起重机名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(o,{span:12},{default:a(()=>[l(d,{label:"生产厂家"},{default:a(()=>[l(i,{modelValue:m.value.manufacturer,"onUpdate:modelValue":e[1]||(e[1]=n=>m.value.manufacturer=n),placeholder:"请输入生产厂家"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(w,{gutter:20},{default:a(()=>[l(o,{span:12},{default:a(()=>[l(d,{label:"型号"},{default:a(()=>[l(i,{modelValue:m.value.model,"onUpdate:modelValue":e[2]||(e[2]=n=>m.value.model=n),placeholder:"请输入型号"},null,8,["modelValue"])]),_:1})]),_:1}),l(o,{span:12},{default:a(()=>[l(d,{label:"类型"},{default:a(()=>[l($,{modelValue:m.value.craneType,"onUpdate:modelValue":e[3]||(e[3]=n=>m.value.craneType=n),placeholder:"请选择类型",style:{width:"100%"}},{default:a(()=>[(R(!0),h(F,null,G(A(q),n=>(R(),J(u,{key:n.value,label:n.label,value:n.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),f("div",ee,[e[35]||(e[35]=f("div",{class:"section-header"},[f("span",null,"起重机基础编辑")],-1)),f("div",le,[l(T,{model:t.value,"label-width":"140px"},{default:a(()=>[l(w,{gutter:20},{default:a(()=>[l(o,{span:12},{default:a(()=>[l(d,{label:"起重机最大长度"},{default:a(()=>[l(i,{modelValue:t.value.maxCraneLength,"onUpdate:modelValue":e[4]||(e[4]=n=>t.value.maxCraneLength=n),placeholder:"请输入"},{append:a(()=>[...e[20]||(e[20]=[r("m",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(o,{span:12},{default:a(()=>[l(d,{label:"车体配重"},{default:a(()=>[l(i,{modelValue:t.value.counterweight,"onUpdate:modelValue":e[5]||(e[5]=n=>t.value.counterweight=n),placeholder:"请输入"},{append:a(()=>[...e[21]||(e[21]=[r("t",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(w,{gutter:20},{default:a(()=>[l(o,{span:12},{default:a(()=>[l(d,{label:"最大起升高度"},{default:a(()=>[l(i,{modelValue:t.value.maxLiftingHeight,"onUpdate:modelValue":e[6]||(e[6]=n=>t.value.maxLiftingHeight=n),placeholder:"请输入"},{append:a(()=>[...e[22]||(e[22]=[r("m",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(o,{span:12},{default:a(()=>[l(d,{label:"最大起重力矩"},{default:a(()=>[l(i,{modelValue:t.value.maxLiftingMoment,"onUpdate:modelValue":e[7]||(e[7]=n=>t.value.maxLiftingMoment=n),placeholder:"请输入"},{append:a(()=>[...e[23]||(e[23]=[r("t·m",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(w,{gutter:20},{default:a(()=>[l(o,{span:12},{default:a(()=>[l(d,{label:"主钩重量"},{default:a(()=>[l(i,{modelValue:t.value.mainHookWeight,"onUpdate:modelValue":e[8]||(e[8]=n=>t.value.mainHookWeight=n),placeholder:"请输入"},{append:a(()=>[...e[24]||(e[24]=[r("t",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(o,{span:12},{default:a(()=>[l(d,{label:"主钩最大钓重"},{default:a(()=>[l(i,{modelValue:t.value.mainHookMaxCapacity,"onUpdate:modelValue":e[9]||(e[9]=n=>t.value.mainHookMaxCapacity=n),placeholder:"请输入"},{append:a(()=>[...e[25]||(e[25]=[r("t",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(w,{gutter:20},{default:a(()=>[l(o,{span:12},{default:a(()=>[l(d,{label:"副钩吊钩重量"},{default:a(()=>[l(i,{modelValue:t.value.auxHookWeight,"onUpdate:modelValue":e[10]||(e[10]=n=>t.value.auxHookWeight=n),placeholder:"请输入"},{append:a(()=>[...e[26]||(e[26]=[r("t",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(o,{span:12},{default:a(()=>[l(d,{label:"副钩最大钓重"},{default:a(()=>[l(i,{modelValue:t.value.auxHookMaxCapacity,"onUpdate:modelValue":e[11]||(e[11]=n=>t.value.auxHookMaxCapacity=n),placeholder:"请输入"},{append:a(()=>[...e[27]||(e[27]=[r("t",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(w,{gutter:20},{default:a(()=>[l(o,{span:12},{default:a(()=>[l(d,{label:"最大变幅角度"},{default:a(()=>[l(i,{modelValue:t.value.maxLuffingAngle,"onUpdate:modelValue":e[12]||(e[12]=n=>t.value.maxLuffingAngle=n),placeholder:"请输入"},{append:a(()=>[...e[28]||(e[28]=[r("度",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(o,{span:12},{default:a(()=>[l(d,{label:"最小变幅角度"},{default:a(()=>[l(i,{modelValue:t.value.minLuffingAngle,"onUpdate:modelValue":e[13]||(e[13]=n=>t.value.minLuffingAngle=n),placeholder:"请输入"},{append:a(()=>[...e[29]||(e[29]=[r("度",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(w,{gutter:20},{default:a(()=>[l(o,{span:12},{default:a(()=>[l(d,{label:"超起平衡重重量"},{default:a(()=>[l(i,{modelValue:t.value.superLiftCounterweightWeight,"onUpdate:modelValue":e[14]||(e[14]=n=>t.value.superLiftCounterweightWeight=n),placeholder:"请输入"},{append:a(()=>[...e[30]||(e[30]=[r("t",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(w,{gutter:20},{default:a(()=>[l(o,{span:12},{default:a(()=>[l(d,{label:"超起平衡重回转半径"},{default:a(()=>[l(i,{modelValue:t.value.superLiftCounterweightRadius,"onUpdate:modelValue":e[15]||(e[15]=n=>t.value.superLiftCounterweightRadius=n),placeholder:"请输入"},{append:a(()=>[...e[31]||(e[31]=[r("m",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(o,{span:12},{default:a(()=>[l(d,{label:"主臂最大长度"},{default:a(()=>[l(i,{modelValue:t.value.mainBoomMaxLength,"onUpdate:modelValue":e[16]||(e[16]=n=>t.value.mainBoomMaxLength=n),placeholder:"请输入"},{append:a(()=>[...e[32]||(e[32]=[r("m",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(w,{gutter:20},{default:a(()=>[l(o,{span:12},{default:a(()=>[l(d,{label:"副臂最大长度"},{default:a(()=>[l(i,{modelValue:t.value.jibMaxLength,"onUpdate:modelValue":e[17]||(e[17]=n=>t.value.jibMaxLength=n),placeholder:"请输入"},{append:a(()=>[...e[33]||(e[33]=[r("m",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(o,{span:12},{default:a(()=>[l(d,{label:"主臂➕副臂最大长度"},{default:a(()=>[l(i,{modelValue:t.value.totalBoomMaxLength,"onUpdate:modelValue":e[18]||(e[18]=n=>t.value.totalBoomMaxLength=n),placeholder:"请输入"},{append:a(()=>[...e[34]||(e[34]=[r("m",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])]),f("div",ae,[f("div",ne,[e[37]||(e[37]=f("span",null,"主臂长度基础编辑",-1)),l(k,{type:"primary",size:"small",onClick:M},{default:a(()=>[l(c,null,{default:a(()=>[l(A(U))]),_:1}),e[36]||(e[36]=r(" 添加行 ",-1))]),_:1})]),f("div",oe,[l(L,{data:V.value,border:"",style:{width:"100%"},"header-cell-style":{background:"#f5f7fa"}},{default:a(()=>[l(y,{type:"index",label:"序号",width:"60"}),l(y,{prop:"workingRadius",label:"工作半径","min-width":"150"},{default:a(n=>[l(i,{modelValue:n.row.workingRadius,"onUpdate:modelValue":p=>n.row.workingRadius=p,placeholder:"请输入半径",size:"small"},{append:a(()=>[...e[38]||(e[38]=[r("m",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(y,{prop:"boomAngle",label:"主臂角度","min-width":"150"},{default:a(n=>[l(i,{modelValue:n.row.boomAngle,"onUpdate:modelValue":p=>n.row.boomAngle=p,placeholder:"请输入主臂角度",size:"small"},{append:a(()=>[...e[39]||(e[39]=[r("度",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(y,{prop:"liftingCapacity",label:"额定载荷","min-width":"150"},{default:a(n=>[l(i,{modelValue:n.row.liftingCapacity,"onUpdate:modelValue":p=>n.row.liftingCapacity=p,placeholder:"请输入额定载荷",size:"small"},{append:a(()=>[...e[40]||(e[40]=[r("t",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(y,{label:"操作",width:"80",fixed:"right"},{default:a(n=>[l(k,{link:"",type:"danger",size:"small",onClick:p=>P(n.$index)},{default:a(()=>[...e[41]||(e[41]=[r(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])]),f("div",te,[f("div",ie,[e[43]||(e[43]=f("span",null,"主臂+副臂(46+9.2)基础编辑",-1)),l(k,{type:"primary",size:"small",onClick:z},{default:a(()=>[l(c,null,{default:a(()=>[l(A(U))]),_:1}),e[42]||(e[42]=r(" 添加行 ",-1))]),_:1})]),f("div",de,[l(L,{data:_.value,border:"",style:{width:"100%"},"header-cell-style":{background:"#f5f7fa"}},{default:a(()=>[l(y,{type:"index",label:"序号",width:"60"}),l(y,{prop:"workingRadius",label:"工作半径","min-width":"150"},{default:a(n=>[l(i,{modelValue:n.row.workingRadius,"onUpdate:modelValue":p=>n.row.workingRadius=p,placeholder:"请输入半径",size:"small"},{append:a(()=>[...e[44]||(e[44]=[r("m",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(y,{prop:"boomAngle",label:"主臂+副臂角度","min-width":"180"},{default:a(n=>[l(i,{modelValue:n.row.boomAngle,"onUpdate:modelValue":p=>n.row.boomAngle=p,placeholder:"请输入主臂+副臂角度",size:"small"},{append:a(()=>[...e[45]||(e[45]=[r("度",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(y,{prop:"liftingCapacity",label:"额定载荷","min-width":"150"},{default:a(n=>[l(i,{modelValue:n.row.liftingCapacity,"onUpdate:modelValue":p=>n.row.liftingCapacity=p,placeholder:"请输入额定载荷",size:"small"},{append:a(()=>[...e[46]||(e[46]=[r("t",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(y,{label:"操作",width:"80",fixed:"right"},{default:a(n=>[l(k,{link:"",type:"danger",size:"small",onClick:p=>H(n.$index)},{default:a(()=>[...e[47]||(e[47]=[r(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])]),f("div",ue,[f("div",re,[e[49]||(e[49]=f("span",null,"主臂+副臂(46+16)基础编辑",-1)),l(k,{type:"primary",size:"small",onClick:j},{default:a(()=>[l(c,null,{default:a(()=>[l(A(U))]),_:1}),e[48]||(e[48]=r(" 添加行 ",-1))]),_:1})]),f("div",se,[l(L,{data:C.value,border:"",style:{width:"100%"},"header-cell-style":{background:"#f5f7fa"}},{default:a(()=>[l(y,{type:"index",label:"序号",width:"60"}),l(y,{prop:"workingRadius",label:"工作半径","min-width":"150"},{default:a(n=>[l(i,{modelValue:n.row.workingRadius,"onUpdate:modelValue":p=>n.row.workingRadius=p,placeholder:"请输入半径",size:"small"},{append:a(()=>[...e[50]||(e[50]=[r("m",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(y,{prop:"boomAngle",label:"主臂+副臂角度","min-width":"180"},{default:a(n=>[l(i,{modelValue:n.row.boomAngle,"onUpdate:modelValue":p=>n.row.boomAngle=p,placeholder:"请输入主臂+副臂角度",size:"small"},{append:a(()=>[...e[51]||(e[51]=[r("度",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(y,{prop:"liftingCapacity",label:"额定载荷","min-width":"150"},{default:a(n=>[l(i,{modelValue:n.row.liftingCapacity,"onUpdate:modelValue":p=>n.row.liftingCapacity=p,placeholder:"请输入额定载荷",size:"small"},{append:a(()=>[...e[52]||(e[52]=[r("t",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(y,{label:"操作",width:"80",fixed:"right"},{default:a(n=>[l(k,{link:"",type:"danger",size:"small",onClick:p=>N(n.$index)},{default:a(()=>[...e[53]||(e[53]=[r(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])]),f("div",me,[l(k,{type:"primary",size:"large",onClick:W},{default:a(()=>[...e[54]||(e[54]=[r(" 确认修改 ",-1)])]),_:1})])]),_:1})])}}},ve=I(pe,[["__scopeId","data-v-d7b85371"]]);export{ve as default};
