import{_ as I,z as O,u as E,g as x,q as S,E as f,a as w,o as U,c as B,d as l,w as a,b as p,F,l as G,m as k,e as u,v as R,h as J}from"./index-74478b48.js";import{m as K,c as Q,n as X}from"./common-72e607b7.js";const Y={class:"crane-detail-container"},Z={class:"info-section"},ee={class:"edit-section"},le={class:"grid-form"},ae={class:"edit-section"},oe={class:"section-header"},te={class:"table-wrapper"},ne={class:"edit-section"},de={class:"section-header"},ie={class:"table-wrapper"},ue={class:"edit-section"},re={class:"section-header"},se={class:"table-wrapper"},me={class:"footer-actions"},pe={__name:"CraneDetail",setup(fe){const V=O(),D=E(),s=x({craneName:"",manufacturer:"",model:"",craneType:""}),d=x({maxCraneLength:"",counterweight:"",maxLiftingHeight:"",maxLiftingMoment:"",mainHookWeight:"",mainHookMaxCapacity:"",auxHookWeight:"",auxHookMaxCapacity:"",maxLuffingAngle:"",minLuffingAngle:"",superLiftCounterweightWeight:"",superLiftCounterweightRadius:"",mainBoomMaxLength:"",jibMaxLength:"",totalBoomMaxLength:""}),b=x([]),_=x([]),C=x([]),h=()=>{b.value.push({workingRadius:"",mainBoomLength:"",liftingCapacity:""})},M=r=>{b.value.splice(r,1)},P=()=>{_.value.push({workingRadius:"",boomAngle:"",liftingCapacity:""})},z=r=>{_.value.splice(r,1)},H=()=>{C.value.push({workingRadius:"",boomAngle:"",liftingCapacity:""})},j=r=>{C.value.splice(r,1)},N=Q();S(async()=>{const r=V.query.id;if(r)try{const e=await K(r);if(e&&e.code==="0"&&e.data){const t=e.data;if(s.value.craneName=t.machineName||V.query.craneName,s.value.manufacturer=t.prodBusiness||V.query.manufacturer,s.value.model=t.model||V.query.model,s.value.craneType=t.type||V.query.craneType,t.sysProjectTemplateCraneDetail){const i=t.sysProjectTemplateCraneDetail;Object.keys(d.value).forEach(n=>{i[n]!==void 0&&(d.value[n]=i[n])})}t.performanceDataVOS&&Array.isArray(t.performanceDataVOS)&&(b.value=[],_.value=[],t.performanceDataVOS.forEach(i=>{i.sysProjectLiftingPerformanceDataList&&Array.isArray(i.sysProjectLiftingPerformanceDataList)&&(i.armType===0?b.value=i.sysProjectLiftingPerformanceDataList.map(n=>({workingRadius:n.workingRadius||"",boomAngle:n.boomAngle||"",liftingCapacity:n.liftingCapacity||""})):i.armType===1?_.value=i.sysProjectLiftingPerformanceDataList.map(n=>({workingRadius:n.workingRadius||"",boomAngle:n.boomAngle||"",liftingCapacity:n.liftingCapacity||""})):i.armType===2&&(C.value=i.sysProjectLiftingPerformanceDataList.map(n=>({workingRadius:n.workingRadius||"",boomAngle:n.boomAngle||"",liftingCapacity:n.liftingCapacity||""}))))}))}else f.error((e==null?void 0:e.message)||"获取起重机详情失败")}catch(e){console.error("获取起重机详情失败:",e),f.error("获取起重机详情失败，请检查网络连接")}else{const e=V.query.craneName,t=V.query.manufacturer,i=V.query.model,n=V.query.craneType;e&&(s.value.craneName=e),t&&(s.value.manufacturer=t),i&&(s.value.model=i),n&&(s.value.craneType=n)}});const q=async()=>{if(!s.value.craneName){f.warning("请输入起重机名称");return}if(!s.value.manufacturer){f.warning("请输入生产厂家");return}if(!s.value.model){f.warning("请输入型号");return}if(!s.value.craneType){f.warning("请选择类型");return}if(!d.value.counterweight){f.warning("请输入车体配重");return}if(!d.value.maxLiftingHeight){f.warning("请输入最大起升高度");return}if(!d.value.maxLiftingMoment){f.warning("请输入最大起重力矩");return}if(!d.value.maxLuffingAngle){f.warning("请输入最大变幅角度");return}for(let r=0;r<b.value.length;r++){const e=b.value[r];if(!e.workingRadius||!e.boomAngle||!e.liftingCapacity){f.warning(`主臂长度基础编辑第${r+1}行数据不完整，请填写完整`);return}}for(let r=0;r<_.value.length;r++){const e=_.value[r];if(!e.workingRadius||!e.boomAngle||!e.liftingCapacity){f.warning(`主臂+副臂(46+9.2)基础编辑第${r+1}行数据不完整，请填写完整`);return}}for(let r=0;r<C.value.length;r++){const e=C.value[r];if(!e.workingRadius||!e.boomAngle||!e.liftingCapacity){f.warning(`主臂+副臂(46+16)基础编辑第${r+1}行数据不完整，请填写完整`);return}}try{const r=V.query.id;if(!r){f.error("缺少起重机ID");return}const e=b.value.map(y=>({workingRadius:y.workingRadius,boomAngle:y.boomAngle,liftingCapacity:y.liftingCapacity})),t=_.value.map(y=>({workingRadius:y.workingRadius,boomAngle:y.boomAngle,liftingCapacity:y.liftingCapacity})),i=C.value.map(y=>({workingRadius:y.workingRadius,boomAngle:y.boomAngle,liftingCapacity:y.liftingCapacity})),n={craneInfoId:r,sysProjectTemplateCraneDetail:d.value,performanceInfoAddUpdateList:[{craneType:0,armType:0,sysProjectLiftingPerformanceDataList:e},{craneType:0,armType:1,sysProjectLiftingPerformanceDataList:t},{craneType:0,armType:2,sysProjectLiftingPerformanceDataList:i}]},g=await X(n);g&&g.code==="0"?(f.success("保存成功"),D.push("/data-management")):f.error((g==null?void 0:g.message)||"保存失败")}catch(r){console.error("保存起重机详情失败:",r),f.error("保存失败，请检查网络连接")}};return(r,e)=>{const t=w("el-input"),i=w("el-form-item"),n=w("el-col"),g=w("el-row"),y=w("el-option"),W=w("el-select"),T=w("el-form"),L=w("el-icon"),c=w("el-button"),v=w("el-table-column"),A=w("el-table"),$=w("el-card");return U(),B("div",Y,[l($,{class:"detail-card"},{header:a(()=>[...e[19]||(e[19]=[p("div",{class:"card-header"},[p("span",null,"起重机设置")],-1)])]),default:a(()=>[p("div",Z,[l(T,{model:s.value,"label-width":"120px"},{default:a(()=>[l(g,{gutter:20},{default:a(()=>[l(n,{span:12},{default:a(()=>[l(i,{label:"起重机名称"},{default:a(()=>[l(t,{modelValue:s.value.craneName,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.craneName=o),placeholder:"请输入起重机名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:a(()=>[l(i,{label:"生产厂家"},{default:a(()=>[l(t,{modelValue:s.value.manufacturer,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.manufacturer=o),placeholder:"请输入生产厂家"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,{gutter:20},{default:a(()=>[l(n,{span:12},{default:a(()=>[l(i,{label:"型号"},{default:a(()=>[l(t,{modelValue:s.value.model,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.model=o),placeholder:"请输入型号"},null,8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:a(()=>[l(i,{label:"类型"},{default:a(()=>[l(W,{modelValue:s.value.craneType,"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.craneType=o),placeholder:"请选择类型",style:{width:"100%"}},{default:a(()=>[(U(!0),B(F,null,G(k(N),o=>(U(),J(y,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),p("div",ee,[e[35]||(e[35]=p("div",{class:"section-header"},[p("span",null,"起重机基础编辑")],-1)),p("div",le,[l(T,{model:d.value,"label-width":"140px"},{default:a(()=>[l(g,{gutter:20},{default:a(()=>[l(n,{span:12},{default:a(()=>[l(i,{label:"起重机最大长度"},{default:a(()=>[l(t,{modelValue:d.value.maxCraneLength,"onUpdate:modelValue":e[4]||(e[4]=o=>d.value.maxCraneLength=o),placeholder:"请输入"},{append:a(()=>[...e[20]||(e[20]=[u("m",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:a(()=>[l(i,{label:"车体配重"},{default:a(()=>[l(t,{modelValue:d.value.counterweight,"onUpdate:modelValue":e[5]||(e[5]=o=>d.value.counterweight=o),placeholder:"请输入"},{append:a(()=>[...e[21]||(e[21]=[u("t",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,{gutter:20},{default:a(()=>[l(n,{span:12},{default:a(()=>[l(i,{label:"最大起升高度"},{default:a(()=>[l(t,{modelValue:d.value.maxLiftingHeight,"onUpdate:modelValue":e[6]||(e[6]=o=>d.value.maxLiftingHeight=o),placeholder:"请输入"},{append:a(()=>[...e[22]||(e[22]=[u("m",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:a(()=>[l(i,{label:"最大起重力矩"},{default:a(()=>[l(t,{modelValue:d.value.maxLiftingMoment,"onUpdate:modelValue":e[7]||(e[7]=o=>d.value.maxLiftingMoment=o),placeholder:"请输入"},{append:a(()=>[...e[23]||(e[23]=[u("t·m",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,{gutter:20},{default:a(()=>[l(n,{span:12},{default:a(()=>[l(i,{label:"主钩重量"},{default:a(()=>[l(t,{modelValue:d.value.mainHookWeight,"onUpdate:modelValue":e[8]||(e[8]=o=>d.value.mainHookWeight=o),placeholder:"请输入"},{append:a(()=>[...e[24]||(e[24]=[u("t",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:a(()=>[l(i,{label:"主钩最大钓重"},{default:a(()=>[l(t,{modelValue:d.value.mainHookMaxCapacity,"onUpdate:modelValue":e[9]||(e[9]=o=>d.value.mainHookMaxCapacity=o),placeholder:"请输入"},{append:a(()=>[...e[25]||(e[25]=[u("t",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,{gutter:20},{default:a(()=>[l(n,{span:12},{default:a(()=>[l(i,{label:"副钩吊钩重量"},{default:a(()=>[l(t,{modelValue:d.value.auxHookWeight,"onUpdate:modelValue":e[10]||(e[10]=o=>d.value.auxHookWeight=o),placeholder:"请输入"},{append:a(()=>[...e[26]||(e[26]=[u("t",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:a(()=>[l(i,{label:"副钩最大钓重"},{default:a(()=>[l(t,{modelValue:d.value.auxHookMaxCapacity,"onUpdate:modelValue":e[11]||(e[11]=o=>d.value.auxHookMaxCapacity=o),placeholder:"请输入"},{append:a(()=>[...e[27]||(e[27]=[u("t",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,{gutter:20},{default:a(()=>[l(n,{span:12},{default:a(()=>[l(i,{label:"最大变幅角度"},{default:a(()=>[l(t,{modelValue:d.value.maxLuffingAngle,"onUpdate:modelValue":e[12]||(e[12]=o=>d.value.maxLuffingAngle=o),placeholder:"请输入"},{append:a(()=>[...e[28]||(e[28]=[u("度",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:a(()=>[l(i,{label:"最小变幅角度"},{default:a(()=>[l(t,{modelValue:d.value.minLuffingAngle,"onUpdate:modelValue":e[13]||(e[13]=o=>d.value.minLuffingAngle=o),placeholder:"请输入"},{append:a(()=>[...e[29]||(e[29]=[u("度",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,{gutter:20},{default:a(()=>[l(n,{span:12},{default:a(()=>[l(i,{label:"超起平衡重重量"},{default:a(()=>[l(t,{modelValue:d.value.superLiftCounterweightWeight,"onUpdate:modelValue":e[14]||(e[14]=o=>d.value.superLiftCounterweightWeight=o),placeholder:"请输入"},{append:a(()=>[...e[30]||(e[30]=[u("t",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,{gutter:20},{default:a(()=>[l(n,{span:12},{default:a(()=>[l(i,{label:"超起平衡重回转半径"},{default:a(()=>[l(t,{modelValue:d.value.superLiftCounterweightRadius,"onUpdate:modelValue":e[15]||(e[15]=o=>d.value.superLiftCounterweightRadius=o),placeholder:"请输入"},{append:a(()=>[...e[31]||(e[31]=[u("m",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:a(()=>[l(i,{label:"主臂最大长度"},{default:a(()=>[l(t,{modelValue:d.value.mainBoomMaxLength,"onUpdate:modelValue":e[16]||(e[16]=o=>d.value.mainBoomMaxLength=o),placeholder:"请输入"},{append:a(()=>[...e[32]||(e[32]=[u("m",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,{gutter:20},{default:a(()=>[l(n,{span:12},{default:a(()=>[l(i,{label:"副臂最大长度"},{default:a(()=>[l(t,{modelValue:d.value.jibMaxLength,"onUpdate:modelValue":e[17]||(e[17]=o=>d.value.jibMaxLength=o),placeholder:"请输入"},{append:a(()=>[...e[33]||(e[33]=[u("m",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(n,{span:12},{default:a(()=>[l(i,{label:"主臂➕副臂最大长度"},{default:a(()=>[l(t,{modelValue:d.value.totalBoomMaxLength,"onUpdate:modelValue":e[18]||(e[18]=o=>d.value.totalBoomMaxLength=o),placeholder:"请输入"},{append:a(()=>[...e[34]||(e[34]=[u("m",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])]),p("div",ae,[p("div",oe,[e[37]||(e[37]=p("span",null,"主臂长度基础编辑",-1)),l(c,{type:"primary",size:"small",onClick:h},{default:a(()=>[l(L,null,{default:a(()=>[l(k(R))]),_:1}),e[36]||(e[36]=u(" 添加行 ",-1))]),_:1})]),p("div",te,[l(A,{data:b.value,border:"",style:{width:"100%"},"header-cell-style":{background:"#f5f7fa"}},{default:a(()=>[l(v,{type:"index",label:"序号",width:"60"}),l(v,{prop:"workingRadius",label:"工作半径","min-width":"150"},{default:a(o=>[l(t,{modelValue:o.row.workingRadius,"onUpdate:modelValue":m=>o.row.workingRadius=m,placeholder:"请输入半径",size:"small"},{append:a(()=>[...e[38]||(e[38]=[u("m",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{prop:"boomAngle",label:"主臂角度","min-width":"150"},{default:a(o=>[l(t,{modelValue:o.row.boomAngle,"onUpdate:modelValue":m=>o.row.boomAngle=m,placeholder:"请输入主臂角度",size:"small"},{append:a(()=>[...e[39]||(e[39]=[u("度",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{prop:"liftingCapacity",label:"额定载荷","min-width":"150"},{default:a(o=>[l(t,{modelValue:o.row.liftingCapacity,"onUpdate:modelValue":m=>o.row.liftingCapacity=m,placeholder:"请输入额定载荷",size:"small"},{append:a(()=>[...e[40]||(e[40]=[u("t",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{label:"操作",width:"80",fixed:"right"},{default:a(o=>[l(c,{link:"",type:"danger",size:"small",onClick:m=>M(o.$index)},{default:a(()=>[...e[41]||(e[41]=[u(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])]),p("div",ne,[p("div",de,[e[43]||(e[43]=p("span",null,"主臂+副臂(46+9.2)基础编辑",-1)),l(c,{type:"primary",size:"small",onClick:P},{default:a(()=>[l(L,null,{default:a(()=>[l(k(R))]),_:1}),e[42]||(e[42]=u(" 添加行 ",-1))]),_:1})]),p("div",ie,[l(A,{data:_.value,border:"",style:{width:"100%"},"header-cell-style":{background:"#f5f7fa"}},{default:a(()=>[l(v,{type:"index",label:"序号",width:"60"}),l(v,{prop:"workingRadius",label:"工作半径","min-width":"150"},{default:a(o=>[l(t,{modelValue:o.row.workingRadius,"onUpdate:modelValue":m=>o.row.workingRadius=m,placeholder:"请输入半径",size:"small"},{append:a(()=>[...e[44]||(e[44]=[u("m",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{prop:"boomAngle",label:"主臂+副臂角度","min-width":"180"},{default:a(o=>[l(t,{modelValue:o.row.boomAngle,"onUpdate:modelValue":m=>o.row.boomAngle=m,placeholder:"请输入主臂+副臂角度",size:"small"},{append:a(()=>[...e[45]||(e[45]=[u("度",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{prop:"liftingCapacity",label:"额定载荷","min-width":"150"},{default:a(o=>[l(t,{modelValue:o.row.liftingCapacity,"onUpdate:modelValue":m=>o.row.liftingCapacity=m,placeholder:"请输入额定载荷",size:"small"},{append:a(()=>[...e[46]||(e[46]=[u("t",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{label:"操作",width:"80",fixed:"right"},{default:a(o=>[l(c,{link:"",type:"danger",size:"small",onClick:m=>z(o.$index)},{default:a(()=>[...e[47]||(e[47]=[u(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])]),p("div",ue,[p("div",re,[e[49]||(e[49]=p("span",null,"主臂+副臂(46+16)基础编辑",-1)),l(c,{type:"primary",size:"small",onClick:H},{default:a(()=>[l(L,null,{default:a(()=>[l(k(R))]),_:1}),e[48]||(e[48]=u(" 添加行 ",-1))]),_:1})]),p("div",se,[l(A,{data:C.value,border:"",style:{width:"100%"},"header-cell-style":{background:"#f5f7fa"}},{default:a(()=>[l(v,{type:"index",label:"序号",width:"60"}),l(v,{prop:"workingRadius",label:"工作半径","min-width":"150"},{default:a(o=>[l(t,{modelValue:o.row.workingRadius,"onUpdate:modelValue":m=>o.row.workingRadius=m,placeholder:"请输入半径",size:"small"},{append:a(()=>[...e[50]||(e[50]=[u("m",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{prop:"boomAngle",label:"主臂+副臂角度","min-width":"180"},{default:a(o=>[l(t,{modelValue:o.row.boomAngle,"onUpdate:modelValue":m=>o.row.boomAngle=m,placeholder:"请输入主臂+副臂角度",size:"small"},{append:a(()=>[...e[51]||(e[51]=[u("度",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{prop:"liftingCapacity",label:"额定载荷","min-width":"150"},{default:a(o=>[l(t,{modelValue:o.row.liftingCapacity,"onUpdate:modelValue":m=>o.row.liftingCapacity=m,placeholder:"请输入额定载荷",size:"small"},{append:a(()=>[...e[52]||(e[52]=[u("t",-1)])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{label:"操作",width:"80",fixed:"right"},{default:a(o=>[l(c,{link:"",type:"danger",size:"small",onClick:m=>j(o.$index)},{default:a(()=>[...e[53]||(e[53]=[u(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])]),p("div",me,[l(c,{type:"primary",size:"large",onClick:q},{default:a(()=>[...e[54]||(e[54]=[u(" 确认修改 ",-1)])]),_:1})])]),_:1})])}}},ye=I(pe,[["__scopeId","data-v-681914cc"]]);export{ye as default};
